====== Certified by Wi-Fi Alliance ======

| **Date** | **Vendor** | **Certificate** | **Hardware** | **Driver (version)** | **Certified** |
| September 11, 2019 | Aeon Matrix Inc. | [[http://certifications.prod.wi-fi.org/pdf/certificate/public/download?cid=WFA91694|Yardian Pro]] PRO1902 (link dead) | ? | [[https://github.com/openwrt/mt76/commit/a5f5605f|mt76]] (pre mainline) | 2,4 GHz, 1 Spatial Stream 2.4 GHz, STA, b/g/n, WMM, WPA2/WPA Personal, Short Guard Interval, TX A-MPDU, STBC Receive, 40 MHz operation in 2.4 GHz with coexistence mechanisms |
| January 14, 2019 | GARDENA GmbH | [[https://api.cert.wi-fi.org/api/certificate/download/public?variantId=14914|GARDENA smart Gateway]] (Art. 19005) | MT7688 | [[https://github.com/openwrt/mt76/commit/6203d46fcc4577065209ea0ed9334d89df4f63f7|mt76]] (pre mainline) | 2,4 GHz, 1 Spatial Stream 2.4 GHz, STA, b/g/n, WMM, WPA2/WPA Personal, Short Guard Interval, TX A-MPDU, STBC Receive, 40 MHz operation in 2.4 GHz with coexistence mechanisms, Greenfield Preamble, STAUT Power Management |

====== Work In Progress ======

===== rtl8xxxu on RTL8188CUS on GARDENA smart gateway  =====

==== Hardware ====
  * End product: ARMv5, Atmel SAM9G25 based GARDENA smart gateway ([[https://github.com/husqvarnagroup/smart-garden-gateway-public|sources]])
  * For development: x86_amd64, [[https://www.edimax.com/edimax/merchandise/merchandise_detail/data/edimax/de/wireless_adapters_n150/ew-7811un/|Edimax EW-7811UN]]

Progress: Hardware is already on the market, nothing left to do or could be changed for that matter.

==== Firmware ====
All driver development and the verification is getting done with firmware version 88.2, which is part of linux-wireless [[https://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git/commit/rtlwifi?id=2ea86675db1349235e9af0a9d0372b72da4db259 | since release 20201118]].

Before linux-wireless release 20201118, the provided firmware was version 80.0, which is known to hang on the GARDENA smart gateway as long-term tests have shown (and on other machines too - Google knows). Only a cold reset resolved the problem, which is easy to do for an USB WLAN stick but problematic (human intervention needed) on a embedded device that has no hardware reset capabilities for the USB device.
==== Driver development and testing ====
=== Setup ===
== Reto ==
  * AP: various (mainly Linksys WRT3200ACM)
  * STA: rtl8xxxu running on Edimax EW-7811UN (amd64) or the GARDENA smart gateway (ARMv5)
  * Distance: Variable, but generally close (1-3m distance)
  * Environment: Residual area; not clean/standardized, but using a (seemingly) non-crowded channel (12)

== Chris ==
  * AP: ?
  * STA: rtl8xxxu running on Edimax EW-7811UN (amd64)
  * Distance: ?
  * Environment: ?

=== Baseline ===
The rtl8xxxu driver performance (throughput) gets compared to the latest vendor driver release (8192cu), which has been patched to work on recent Linux versions (5.10+): https://github.com/husqvarnagroup/8192cu_rtl8188cus

=== Progress ===
| **Priority**  | **Task**                                                                            | **Wi-Fi Alliance Test Case**     | **State**                                             | **Optional**  |
| 1             | ACK #1: Fix Block ACKs to include (ack) recently sent frames                       | n/a (but a prerequisite)         | WIP                                                   |  n            |
| 2             | ACK #2: Fix regular ACKs to work also with non-MCS2 packets                         | n/a (but a prerequisite)         | WIP                                                   |  n            |
| unknown       | Allow setting TX power limit via iw                                                 | none, but needed for EMC         | implemented, needs to be verified by GARDENA          |  n            |
| unknown       | TX Power: power by rate.                                                            | none, but maybe required for EMC | not yet implemented                                   |  n            |
| unknown       | A-MSDU (RX support)                                                                 | 5.2.38                           | not yet implemented                                   |  n            |
| unknown       | WMM: Wi-Fi Multimedia                                                               | many                             | not yet implemented                                   |  n (but ASD?) |
| unknown       | 802.11n: STBC Receive                                                               | 5.2.46                           | implemented, needs to be verified                     |  n            |
| unknown       | A-MPDU: #1. Handle ampdu_action properly on TX. Ex.ADDBA, DELBA, BAR                | 5.2.47                           | implemented, needs to be verified                     |  n            |
| unknown       | A-MPDU: #2. Make sure BAR to be handled correctly on RX                             | 5.2.47                           | not yet implemented                                   |  n            |
| unknown       | iw station dump: "tx bitrate: (unknown)" (n/a)                                      | n/a                              | fixed                                                 |  y            |
| unknown       | iw output: "Available Antennas: TX 0 RX 0" (n/a)                                    | n/a                              | fixed                                                 |  y            |
| unknown       | Reach MCS5 ~ MCS7 rate under rate control                                           | n/a                              | not yet implemented                                   |  y            |
| unknown       | Protected Management Frames (For WPA3 support)                                      | unknown                          | not yet implemented, HW support unknown (RTL8188CUS)  |  y            |
| unknown       | CRDA + RegDB support: Static TX power limit, global                                 | unknown                          | not yet implemented                                   |  y            |
| unknown       | CRDA + RegDB support: Country support (implement regd_notifier())                   | unknown                          | not yet implemented                                   |  y            |
| none          | Greenfield mode                                                                     | 5.2.41 (no longer existing)      | not yet implemented                                   |  y            |
| unknown       | Regulatory domain: Hook the TX power set/get of the cfg80211 to the driver          | none                             | not yet implemented                                   |  y            |

== ACK #1: Fix Block ACKs to include (ack) recently sent frames ==

rtl8xxxu:
During block ACK sessions, the STA does not ACK frames sent by the AP in time, causing the AP to resend them. It is unknown whether the frames have not been properly received by the STA or if the STA is "just" too slow to ACK them in time.

This results in retransmission percentages of 10-50%. While still yielding usable performance (10-40 MBit/s), this percentage is too high for passing the Wi-Fi Alliance certification.

8192cu:
ACK-ing all sent frames in time, resulting in only 1-2% retransmitted frames and great performance (35+ MBit/s).
