


===== About mac80211 =====

mac80211 is a framework which driver developers can use to write drivers for [[en/developers/Documentation/Glossary|SoftMAC]] wireless devices.  

SoftMAC devices allow for a finer control of the hardware, allowing for 802.11 frame management to be done in software for them, for both parsing and generation of 802.11 wireless frames. Most 802.11 devices today tend to be of this type.  

mac80211 implements the cfg80211 callbacks for SoftMAC devices, mac80211 then depends on cfg80211 for both registration to the networking subsystem and for configuration. Configuration is handled by cfg80211 both through nl80211 and wireless extensions. 

In mac80211 the [[en/developers/Documentation/Glossary|MLME]] is done in the kernel for station mode ([[en/developers/Documentation/Glossary|STA]]) and in userspace for [[en/developers/Documentation/Glossary|AP]] mode ([[en/users/Documentation/hostapd|hostapd]]). 

If you have new userspace utilities which support nl80211 you do not need wireless-extensions to support a mac80211 device. 


===== Supported features =====

Here is a quick review of the features supported in mac80211. 
  * IEEE 802.11abgn 
  * IEEE 802.11d 
  * Integration of work for the emerging 802.11s standard 
  * Roaming using wpa_supplicant (802.11r as well). See [[en/developers/todo-list|Roaming TODO section]] for more details 
  * Different types of interfaces, see [[en/users/Documentation/modes|supported wireless modes]] for details. 
  * Vendor specific rate support 
  * [[en/developers/Documentation/mac80211/queues|QoS]] 
  * all mac80211 drivers get monitor mode support 
===== The mac80211 book =====

We are working on a [[http://wireless.kernel.org/80211books/|set of documentation books]], including one for mac80211, which are generated from comments in the various source files. You will find a more thorough review of mac80211 in the mac80211 book; the wiki pages can be used as a quick reference for mac80211 development. The book incorporates the kernel-doc docs below. 


===== mac80211 driver API =====

The [[en/developers/Documentation/mac80211/semantics|new mac80211 driver interface semantics]] gives an overview of the expected and suggested driver behavior. 

The [[en/developers/Documentation/mac80211/API|API page]] lists notes about using the driver API. 

The [[en/developers/Documentation/mac80211/tracing|tracing page]] has notes on how to trace what mac80211 is asking the driver to do. 

Sequence diagrams: 
    * [[en/developers/Documentation/mac80211/auth-assoc-deauth|auth/assoc/deauth diagram]] 
    * [[en/developers/Documentation/mac80211/hw-scan|HW scan diagram]] 


===== mac80211 drivers =====

mac80211 drivers are listed on the [[en/users/Drivers|drivers table]] 


===== mac80211 802.11d support =====

mac80211 supports 802.11d by processing country information element on beacons after association with an AP. You should still be able to associate to the AP in your region as cfg80211 allows users to set the regulatory domain from userspace before country information elements are parsed, this is expected to be set via wpa_supplicant upon initialization. We let cfg80211 parse the country information element for us and deal with reviewing regulatory enforcement for us. To review that please see [[en/developers/Documentation/cfg80211|cfg80211's regulatory support]]. 


===== 802.11n and WEP or TKIP =====

IEEE 802.11n does not allow TKIP/WEP as pairwise ciphers in HT mode. If any of these ciphers are found to be used by the AP when a STA tries to associate to it: 


<code>WLAN_CIPHER_SUITE_WEP40
WLAN_CIPHER_SUITE_TKIP
WLAN_CIPHER_SUITE_WEP104</code>
then 802.11n will be disabled and the STA will fall back to legacy mode of operation: 802.11a/b/g. 


===== other documentation =====
      * {{mac80211.pdf|Johannes Berg's presentation}}


===== mac80211 files and kernel docs =====

There are more files, these have kerneldocs available. The rest of the files are in net/mac80211/. 
|File location / kerneldoc (kernel-doc warnings) |Branch |Branch |
|[[en/developers/Documentation/kerneldoc/include/net/mac80211.h|include/net/mac80211.h]] ([[en/developers/Documentation/kerneldoc/warnings/include/net/mac80211.h|W]]) |[[http://git.kernel.org/?p=linux/kernel/git/linville/wireless-2.6.git;a=blob;f=include/net/mac80211.h;hb=HEAD|master]] |[[http://git.kernel.org/?p=linux/kernel/git/mcgrof/wireless-everything.git;a=blob;f=include/net/mac80211.h;hb=HEAD|everything]] |
|[[en/developers/Documentation/kerneldoc/net/mac80211/ieee80211.c|net/mac80211/ieee80211.c]] ([[en/developers/Documentation/kerneldoc/warnings/net/mac80211/ieee80211.c|W]]) |[[http://git.kernel.org/?p=linux/kernel/git/linville/wireless-2.6.git;a=blob;f=net/mac80211/ieee80211.c;hb=HEAD|master]] |[[http://git.kernel.org/?p=linux/kernel/git/mcgrof/wireless-everything.git;a=blob;f=net/mac80211/ieee80211.c;hb=HEAD|everything]] |
|[[en/developers/Documentation/kerneldoc/net/mac80211/ieee80211_i.h|net/mac80211/ieee80211_i.h]] ([[en/developers/Documentation/kerneldoc/warnings/net/mac80211/ieee80211_i.h|W]]) |[[http://git.kernel.org/?p=linux/kernel/git/linville/wireless-2.6.git;a=blob;f=net/mac80211/ieee80211_i.h;hb=HEAD|master]] |[[http://git.kernel.org/?p=linux/kernel/git/mcgrof/wireless-everything.git;a=blob;f=net/mac80211/ieee80211_i.h;hb=HEAD|everything]] |
|[[en/developers/Documentation/kerneldoc/net/mac80211/rc80211_pid.h|net/mac80211/rc80211_pid.h]] ([[en/developers/Documentation/kerneldoc/warnings/net/mac80211/rc80211_pid.h|W]]) |[[http://git.kernel.org/?p=linux/kernel/git/linville/wireless-2.6.git;a=blob;f=net/mac80211/rc80211_pid.h;hb=HEAD|master]] |[[http://git.kernel.org/?p=linux/kernel/git/mcgrof/wireless-everything.git;a=blob;f=net/mac80211/rc80211_pid.h;hb=HEAD|everything]] |
|[[en/developers/Documentation/kerneldoc/net/mac80211/sta_info.c|net/mac80211/sta_info.c]] ([[en/developers/Documentation/kerneldoc/warnings/net/mac80211/sta_info.c|W]]) |[[http://git.kernel.org/?p=linux/kernel/git/linville/wireless-2.6.git;a=blob;f=net/mac80211/sta_info.c;hb=HEAD|master]] |[[http://git.kernel.org/?p=linux/kernel/git/mcgrof/wireless-everything.git;a=blob;f=net/mac80211/sta_info.c;hb=HEAD|everything]] |
|[[en/developers/Documentation/kerneldoc/net/mac80211/sta_info.c|net/mac80211/sta_info.h]] ([[en/developers/Documentation/kerneldoc/warnings/net/mac80211/sta_info.h|W]]) |[[http://git.kernel.org/?p=linux/kernel/git/linville/wireless-2.6.git;a=blob;f=net/mac80211/sta_info.h;hb=HEAD|master]] |[[http://git.kernel.org/?p=linux/kernel/git/mcgrof/wireless-everything.git;a=blob;f=net/mac80211/sta_info.h;hb=HEAD|everything]] |
|[[en/developers/Documentation/kerneldoc/net/mac80211/tx.c|net/mac80211/tx.c]] ([[en/developers/Documentation/kerneldoc/warnings/net/mac80211/tx.c|W]]) |[[http://git.kernel.org/?p=linux/kernel/git/linville/wireless-2.6.git;a=blob;f=net/mac80211/tx.c;hb=HEAD|master]] |[[http://git.kernel.org/?p=linux/kernel/git/mcgrof/wireless-everything.git;a=blob;f=net/mac80211/tx.c;hb=HEAD|everything]] |
